<!DOCTYPE html>
<html>
<head>
    <title>News Up</title>
    <meta charset="utf-8">

    <link rel="icon" href="img/app.png" type="image/png"/>
    <link rel="stylesheet" href="css/main.css"/>

    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script>
    var v_title, v_author, v_age;
    var current_site = 100;
    var scrolled;

    function display_list(data) {
        $("#news_list").html(data);
    }
    function display_error(error) {
     //   $("#news_list").text(error);
    }
    function display_sections(data) {
        $("#nu_sections").html(data);
    }
    function display_news(data) {
        scrolled = $("body").scrollTop();
        $("body").scrollTop(0);
        $("#article_box")[0].style.visibility = 'visible';
        $("#news_list")[0].style.visibility = 'hidden';
        $("#title").text(v_title);
        $("#date").text(v_age);
        $("#content").html(data);
    }
    function closeNews(data) {
        $("#article_box")[0].style.visibility = 'hidden';
        $("#news_list")[0].style.visibility = 'visible';
        $("body").scrollTop(scrolled);
    }

    var sCountry = 0;
    var sLanguage = 0;
    var sCategory = 0;

    function parseSelection() {
        var result =".site"

        if (sCountry!="0") {
            result += "[co="+sCountry+"]"
        }
        if (sLanguage!="0") {
            result += "[la="+sLanguage+"]"
        }
        if (sCategory!="0") {
            result += "[ty="+sCategory+"]"
        }
   //     console.log("query: "+ result);
        return result;
    }

	$(document).ready(function () {

        $("#article_box")[0].style.visibility = 'hidden';

        $(".site").click(function() {

            var code = $(this).attr("id");
            current_site=code;

            $.ajax("/web?index&site=" + code + ",0", {
                success: display_list,
                error: display_error("Error loading news from .site")
            });
            $.ajax("/web?sections&site=" + code, {
                success: display_sections,
                error: display_error("Error loading sections from .site")
            });

            $("#news_list").text("");

            var site_info = $("#site_info");
            site_info.find("img").eq(0).attr('src',"img/"+ code + ".png");
            site_info.find("span").eq(0).text($(this).text());

        });

        $("#105").click();

        $(".closer").click(function() {
            closeNews();
        })
        .mouseenter(function() {
            $(this).find("img").eq(0).attr('src',"img/ic_arrow_back_hover.svg");
        })
        .mouseleave(function() {
            $(this).find("img").eq(0).attr('src',"img/ic_arrow_back.svg");
        });

        $('#sel_country').change(function() {
            sCountry = $(this).val();

           $('.site').hide();
           $(parseSelection()).show();

        });
        $('#sel_language').change(function() {
            sLanguage = $(this).val();

            $('.site').hide();
            $(parseSelection()).show();

        });
        $('#sel_category').change(function() {
            sCategory = $(this).val();

            $('.site').hide();
            $(parseSelection()).show();
        });

    });

    $(document).on('click', '.section', function() {
        var section_index = $(this).attr('index');

        $.ajax("/web?index&site=" + current_site + "," + section_index, {
            success: display_list,
            error: display_error("Error loading news from .section")
        });
    });

    $(document).on('click', '.news', function () {

        v_title = $(this).attr("title");
        v_age = $(this).attr("age");

        var v_nid = $(this).attr("nid");

        $.ajax("/web?content&site=" + current_site + "&nid=" + v_nid, {
            success: display_news,
            error: display_error("Error loading news from .news")
        });
    });
    </script>
</head>
<body>

<nav id="nav_sites">
    <div>
        <span>Country:</span>
        <select id="sel_country">
            <option value="0">All</option>
            <option value="23">Spain</option>
            <option value="56">UK</option>
            <option value="24">USA</option>
            <option value="60">Sweden</option>
            <option value="10">Canada</option>
            <option value="34">India</option>
            <option value="28">Finland</option>
            <option value="58">Russia</option>
            <option value="65">Europe</option>
            <option value="66">World</option>
        </select>
    </div>
    <div>
        <span>Language:</span>
        <select id="sel_language">
            <option value="0">All</option>
            <option value="7">Spanish</option>
            <option value="12">English</option>
            <option value="17">Swedish</option>
            <option value="4">Catalan</option>
            <option value="8">Finnish</option>
            <option value="19">Many</option>
        </select>
    </div>
    <div>
        <span>Category:</span>
        <select id="sel_category">
            <option value="0">All</option>
            <option value="1">Newspaper</option>
            <option value="2">Sport newspaper</option>
            <option value="3">Technology</option>
            <option value="4">Blogs</option>
            <option value="5">Magazines</option>
            <option value="6">Astronomy</option>
            <option value="7">Science</option>
            <option value="8">Videogames</option>
            <option value="9">Lifestyle</option>
        </select>
    </div>

    <ul id="navigation">
        <li class='site' id='100' co='23' la='7' ty='1'><img src='img/100.png'><span>El Pais</span></li>
        <li class='site' id='105' co='23' la='7' ty='1'><img src='img/105.png'><span>20 Minutos</span></li>
        <li class='site' id='110' co='23' la='7' ty='1'><img src='img/110.png'><span>El Mundo</span></li>
        <li class='site' id='115' co='23' la='7' ty='2'><img src='img/115.png'><span>As</span></li>
        <li class='site' id='120' co='23' la='7' ty='2'><img src='img/120.png'><span>Marca</span></li>
        <li class='site' id='125' co='23' la='7' ty='1'><img src='img/125.png'><span>El Confidencial</span></li>
        <li class='site' id='130' co='23' la='7' ty='1'><img src='img/130.png'><span>El Diario</span></li>
        <li class='site' id='135' co='23' la='7' ty='1'><img src='img/135.png'><span>La Razón</span></li>
        <li class='site' id='140' co='23' la='7' ty='1'><img src='img/140.png'><span>Huffington Post España</span></li>
        <li class='site' id='145' co='23' la='7' ty='1'><img src='img/145.png'><span>Europa press</span></li>
        <li class='site' id='150' co='23' la='7' ty='1'><img src='img/150.png'><span>Diario Córdoba</span></li>
        <li class='site' id='155' co='23' la='7' ty='1'><img src='img/155.png'><span>Abc</span></li>
        <li class='site' id='200' co='23' la='4' ty='1'><img src='img/200.png'><span>El Periódico (Cat)</span></li>
        <li class='site' id='205' co='23' la='7' ty='1'><img src='img/205.png'><span>El Periódico (Esp)</span></li>
        <li class='site' id='210' co='23' la='7' ty='1'><img src='img/210.png'><span>La Vanguardia</span></li>
        <li class='site' id='215' co='23' la='7' ty='2'><img src='img/215.png'><span>Sport</span></li>
        <li class='site' id='220' co='23' la='7' ty='2'><img src='img/220.png'><span>Mundo Deportivo</span></li>
        <li class='site' id='225' co='23' la='4' ty='1'><img src='img/225.png'><span>Racó Català</span></li>
        <li class='site' id='230' co='23' la='4' ty='1'><img src='img/230.png'><span>VilaWeb</span></li>
        <li class='site' id='300' co='60' la='17' ty='1'><img src='img/300.png'><span>Aftonbladet</span></li>
        <li class='site' id='305' co='60' la='17' ty='1'><img src='img/305.png'><span>Expressen</span></li>
        <li class='site' id='310' co='60' la='17' ty='1'><img src='img/310.png'><span>Dagens Nyheter</span></li>
        <li class='site' id='315' co='60' la='17' ty='1'><img src='img/315.png'><span>Svenska Dagbladet</span></li>
        <li class='site' id='325' co='60' la='17' ty='1'><img src='img/325.png'><span>Fria Tider</span></li>
        <li class='site' id='330' co='60' la='17' ty='1'><img src='img/330.png'><span>Metro</span></li>
        <li class='site' id='400' co='28' la='12' ty='1'><img src='img/400.png'><span>Helsinki times</span></li>
        <li class='site' id='405' co='28' la='8' ty='1'><img src='img/405.png'><span>Helsingin Sanomat</span></li>
        <li class='site' id='410' co='28' la='8' ty='1'><img src='img/410.png'><span>Iltalehti</span></li>
        <li class='site' id='415' co='28' la='8' ty='1'><img src='img/415.png'><span>Yle</span></li>
        <li class='site' id='500' co='56' la='12' ty='1'><img src='img/500.png'><span>BBC</span></li>
        <li class='site' id='505' co='56' la='12' ty='1'><img src='img/505.png'><span>The Telegraph</span></li>
        <li class='site' id='510' co='56' la='12' ty='1'><img src='img/510.png'><span>The Huffington Post UK</span></li>
        <li class='site' id='515' co='56' la='12' ty='1'><img src='img/515.png'><span>Metro UK</span></li>
        <li class='site' id='520' co='56' la='12' ty='1'><img src='img/520.png'><span>The Guardian</span></li>
        <li class='site' id='525' co='56' la='12' ty='1'><img src='img/525.png'><span>The Herald Scotland</span></li>
        <li class='site' id='600' co='24' la='12' ty='1'><img src='img/600.png'><span>CNN</span></li>
        <li class='site' id='605' co='24' la='12' ty='1'><img src='img/605.png'><span>The Huffington Post USA</span></li>
        <li class='site' id='610' co='24' la='12' ty='1'><img src='img/610.png'><span>USA Today</span></li>
        <li class='site' id='615' co='24' la='12' ty='1'><img src='img/615.png'><span>The New York Times</span></li>
        <li class='site' id='700' co='65' la='12' ty='1'><img src='img/700.png'><span>The Local</span></li>
        <li class='site' id='715' co='10' la='12' ty='1'><img src='img/715.png'><span>The Huffington Post Canada</span></li>
        <li class='site' id='720' co='58' la='12' ty='1'><img src='img/720.png'><span>The Siberian Times</span></li>
        <li class='site' id='725' co='34' la='12' ty='1'><img src='img/725.png'><span>The Times of India</span></li>
        <li class='site' id='800' co='23' la='7' ty='3'><img src='img/800.png'><span>El Androide Libre</span></li>
        <li class='site' id='805' co='24' la='12' ty='3'><img src='img/805.png'><span>Digital Trends</span></li>
        <li class='site' id='810' co='24' la='12' ty='3'><img src='img/810.png'><span>Lifehacker</span></li>
        <li class='site' id='815' co='23' la='7' ty='3'><img src='img/815.png'><span>Xataka</span></li>
        <li class='site' id='820' co='24' la='12' ty='7'><img src='img/820.png'><span>TED</span></li>
        <li class='site' id='825' co='65' la='12' ty='3'><img src='img/825.png'><span>Gizmodo</span></li>
        <li class='site' id='830' co='24' la='12' ty='3'><img src='img/830.png'><span>Android Authority</span></li>
        <li class='site' id='835' co='23' la='7' ty='3'><img src='img/835.png'><span>Computer Hoy</span></li>
        <li class='site' id='840' co='60' la='17' ty='3'><img src='img/840.png'><span>Swedroid</span></li>
        <li class='site' id='845' co='23' la='7' ty='3'><img src='img/845.png'><span>Hipertextual</span></li>
        <li class='site' id='850' co='24' la='12' ty='3'><img src='img/850.png'><span>Mashable</span></li>
        <li class='site' id='855' co='24' la='12' ty='3'><img src='img/855.png'><span>PC World</span></li>
        <li class='site' id='860' co='24' la='12' ty='3'><img src='img/860.png'><span>The Verge</span></li>
        <li class='site' id='865' co='23' la='7' ty='3'><img src='img/865.png'><span>Clipset</span></li>
        <li class='site' id='870' co='24' la='12' ty='3'><img src='img/870.png'><span>TechCrunch</span></li>
        <li class='site' id='900' co='24' la='12' ty='4'><img src='img/900.png'><span>Medium</span></li>
        <li class='site' id='905' co='23' la='7' ty='4'><img src='img/905.png'><span>Verne</span></li>
        <li class='site' id='910' co='34' la='12' ty='3'><img src='img/910.png'><span>Digital Inspiration</span></li>
        <li class='site' id='915' co='24' la='12' ty='4'><img src='img/915.png'><span>Google Earth Blog</span></li>
        <li class='site' id='1010' co='24' la='12' ty='5'><img src='img/1010.png'><span>Rolling Stone</span></li>
        <li class='site' id='1015' co='24' la='12' ty='5'><img src='img/1015.png'><span>People</span></li>
        <li class='site' id='1020' co='24' la='12' ty='5'><img src='img/1020.png'><span>Time</span></li>
        <li class='site' id='1025' co='24' la='12' ty='5'><img src='img/1025.png'><span>The Atlantic</span></li>
        <li class='site' id='1000' co='24' la='12' ty='5'><img src='img/1000.png'><span>Make</span></li>
        <li class='site' id='1005' co='24' la='12' ty='5'><img src='img/1005.png'><span>Discover</span></li>
        <li class='site' id='1045' co='23' la='7' ty='5'><img src='img/1045.png'><span>Digital Camera</span></li>
        <li class='site' id='1060' co='23' la='7' ty='5'><img src='img/1060.png'><span>Elle</span></li>
        <li class='site' id='1065' co='24' la='12' ty='5'><img src='img/1065.png'><span>The Intercept</span></li>
        <li class='site' id='1035' co='24' la='12' ty='5'><img src='img/1035.png'><span>Dogster</span></li>
        <li class='site' id='1040' co='23' la='7' ty='5'><img src='img/1040.png'><span>El Jueves</span></li>
        <li class='site' id='1030' co='24' la='12' ty='6'><img src='img/1030.png'><span>Sky and Telescope</span></li>
        <li class='site' id='1050' co='24' la='12' ty='6'><img src='img/1050.png'><span>Space News</span></li>
        <li class='site' id='1300' co='23' la='7' ty='8'><img src='img/1300.png'><span>Meristation</span></li>
        <li class='site' id='1305' co='23' la='7' ty='8'><img src='img/1305.png'><span>Vandal</span></li>
        <li class='site' id='1400' co='66' la='19' ty='9'><img src='img/1400.png'><span>Vice</span></li>
    </ul>
</nav>

<div id="site_info">
    <img src="img/1400.png"><span>Vice</span>
</div>

<article id="news_list">
</article>

<aside id="nav_sections">
    <h3>Sections</h3>
    <p id="nu_sections"></p>
</aside>

<footer id="nu_footer">
</footer>

<div id="article_box">
    <article id="article_news">
        <div class="closer"><img src="img/ic_arrow_back.svg"/></div>
        <h1 id="title"></h1>
        <div>
            <span id="author">By NewsUp :)</span>
            <span id="date"></span>
        </div>
        <div id="content"></div>
        <div class="closer"><img src="img/ic_arrow_back.svg"/></div>
    </article>
</div>

</body>
</html>